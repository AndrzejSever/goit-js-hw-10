{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst variables = {\n  inputValue: document.querySelector('#datetime-picker'),\n  buttonStart: document.querySelector('[type=\"button\"]'),\n  userSelectedDate: null,\n  timer: null,\n\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const pad = value => String(value).padStart(2, '0');\n\n    const days = pad(Math.floor(ms / day));\n    const hours = pad(Math.floor((ms % day) / hour));\n    const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n    const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n    return { days, hours, minutes, seconds };\n  },\n};\n\nconst addingMarkup = {\n  addDays: document.querySelector('[data-days]'),\n  addHours: document.querySelector('[data-hours]'),\n  addMinutes: document.querySelector('[data-minutes]'),\n  addSeconds: document.querySelector('[data-seconds]'),\n\n  updateMarkup({ days, hours, minutes, seconds }) {\n    this.addDays.textContent = days;\n    this.addHours.textContent = hours;\n    this.addMinutes.textContent = minutes;\n    this.addSeconds.textContent = seconds;\n  },\n};\n\nfunction startTimer() {\n  const intervalId = setInterval(() => {\n    const deltaTime = variables.userSelectedDate - new Date();\n    if (deltaTime <= 0) {\n      clearInterval(intervalId);\n      iziToast.show({\n        title: 'info',\n        message: 'Time is up!',\n        color: '#4CAF50',\n        position: 'topRight',\n        messageColor: '#fff',\n        titleColor: '#fff',\n      });\n      return;\n    }\n    const timeComponents = variables.convertMs(deltaTime);\n    addingMarkup.updateMarkup(timeComponents);\n  }, 1000);\n}\n\nfunction onDateSelected(selectedDates) {\n  if (selectedDates[0] > new Date()) {\n    variables.userSelectedDate = selectedDates[0];\n    variables.buttonStart.classList.remove('hiddenBtn');\n    variables.buttonStart.addEventListener('click', startTimer, { once: true });\n  } else {\n    variables.buttonStart.classList.add('hiddenBtn');\n    iziToast.show({\n      title: 'error',\n      message: 'Please choose a date in the future',\n      color: '#ef4040',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      imageWidth: '24',\n    });\n  }\n}\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: onDateSelected,\n});\n\nvariables.buttonStart.classList.add('hiddenBtn');"],"names":["variables","ms","pad","value","days","hours","minutes","seconds","addingMarkup","startTimer","intervalId","deltaTime","iziToast","timeComponents","onDateSelected","selectedDates","flatpickr"],"mappings":"+IAOA,MAAMA,EAAY,CAChB,WAAY,SAAS,cAAc,kBAAkB,EACrD,YAAa,SAAS,cAAc,iBAAiB,EACrD,iBAAkB,KAClB,MAAO,KAEP,UAAUC,EAAI,CAMZ,MAAMC,EAAMC,GAAS,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAE5CC,EAAOF,EAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC/BI,EAAQH,EAAI,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EACzCK,EAAUJ,EAAI,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EACtDM,EAAUL,EAAI,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACH,EAEMC,EAAe,CACnB,QAAS,SAAS,cAAc,aAAa,EAC7C,SAAU,SAAS,cAAc,cAAc,EAC/C,WAAY,SAAS,cAAc,gBAAgB,EACnD,WAAY,SAAS,cAAc,gBAAgB,EAEnD,aAAa,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC9C,KAAK,QAAQ,YAAcH,EAC3B,KAAK,SAAS,YAAcC,EAC5B,KAAK,WAAW,YAAcC,EAC9B,KAAK,WAAW,YAAcC,CAC/B,CACH,EAEA,SAASE,GAAa,CACpB,MAAMC,EAAa,YAAY,IAAM,CACnC,MAAMC,EAAYX,EAAU,iBAAmB,IAAI,KACnD,GAAIW,GAAa,EAAG,CAClB,cAAcD,CAAU,EACxBE,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,cACT,MAAO,UACP,SAAU,WACV,aAAc,OACd,WAAY,MACpB,CAAO,EACD,MACD,CACD,MAAMC,EAAiBb,EAAU,UAAUW,CAAS,EACpDH,EAAa,aAAaK,CAAc,CACzC,EAAE,GAAI,CACT,CAEA,SAASC,EAAeC,EAAe,CACjCA,EAAc,CAAC,EAAI,IAAI,MACzBf,EAAU,iBAAmBe,EAAc,CAAC,EAC5Cf,EAAU,YAAY,UAAU,OAAO,WAAW,EAClDA,EAAU,YAAY,iBAAiB,QAASS,EAAY,CAAE,KAAM,EAAI,CAAE,IAE1ET,EAAU,YAAY,UAAU,IAAI,WAAW,EAC/CY,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,MAAO,UACP,SAAU,WACV,aAAc,OACd,WAAY,OACZ,WAAY,IAClB,CAAK,EAEL,CAEAI,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASF,CACX,CAAC,EAEDd,EAAU,YAAY,UAAU,IAAI,WAAW"}